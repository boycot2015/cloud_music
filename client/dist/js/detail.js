"use strict";var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};$(function(){var e=commonObj.getTpl("/template/index.html"),i=window.parent.document;window.detailObj={data:function(){return{cover:"",songTextArr:[],$refs:{el:$(".song-detail"),children:$(".song-detail").children()}}},methods:{getData:function(){this.getlyric(),this.getComment(),this.getSamePlayList(),this.sameMusicList()},getlyric:function(){$.ajax({type:"get",dataType:"json",data:$.$route.query,url:apiUrls.song.lyric,success:function(t){var i=[];200==t.code&&t.lrc&&t.lrc.lyric.split("\n").map(function(t,e){var a={};0<e&&t&&(t=t.split("]"),a.time=t[0].split("[")[1],a.text=t[1],i.push(a))}),$(".song-detail .top").render($(e).find("#detailTemp"),{lyricList:i,playData:$.$store.get("playData")})}})},filterTime:function(t){var e=new Date(t),a=e.getMonth()+1,i=e.getDate(),s=(s=e.getHours())<10?"0"+s:s,n=e.getMinutes();return a+"月"+i+"日 "+s+":"+(n=n<10?"0"+n:n)},getComment:function(){$.ajax({type:"get",dataType:"json",data:_extends({limit:20},$.$route.query),url:apiUrls.comment.music,success:function(t){200==t.code&&(t.hotComments.map(function(t){t.time=detailObj.filterTime(t.time)}),t.comments.map(function(t){t.time=detailObj.filterTime(t.time)}),$(".song-detail .comment").render($(e).find("#commentTemp"),{data:t}))}})},getSamePlayList:function(){$.ajax({type:"get",dataType:"json",data:_extends({},$.$route.query),url:apiUrls.simi.playlist,success:function(t){200==t.code&&(t.playlists.map(function(t){t.playCount=$.filterPlayCount(t.playCount)}),console.log(t,"samePlayListTemp"),$(".song-detail .same-play-list").render($(e).find("#samePlayListTemp"),{data:t}))}})},sameMusicList:function(){$.ajax({type:"get",dataType:"json",data:_extends({},$.$route.query),url:apiUrls.simi.song,success:function(t){200==t.code&&(console.log(t,"sameMusicListTemp"),$(".song-detail .same-music-list").render($(e).find("#sameMusicListTemp"),{data:t}))}})}},mounted:function(){this.getData(),setTimeout(function(){$(".song-detail, .song-detail .cover").addClass("active"),$(i).find(".js-play").hasClass("play")?$(".song-detail .cover").addClass("play").siblings(".handler").addClass("active"):$(".song-detail .cover").removeClass("play").addClass("pause").siblings(".handler").removeClass("active")},120),$(".song-detail").on("click",".icon-minify",function(){var t=$.getUrlandParam($.$store.get("historyUrl"),"id");$(i).find(".js-aside").removeClass("active"),$.$router.push(t.path,t)}),$(".song-detail").on("click",".js-list-detail",function(){var t=$(this).attr("data-id"),e=$(this).attr("data-type"),a=$(this).attr("data-ctype");$(i).find(".js-aside").removeClass("active"),$.$router.push("/songs/list",{id:t,type:e,ctype:a})})}},Object.assign(detailObj,detailObj.data()),Object.assign(detailObj,detailObj.methods),detailObj.mounted(),$.extend({detailObj:detailObj})});