"use strict";function _objectWithoutProperties(t,e){var i={};for(var s in t)0<=e.indexOf(s)||Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i}$(function(){var t={setLocal:function(){var t=$.$store.get("songList");return $(".song-list").render($(layoutTemp).find("#gridListTemp"),t),t},init:function(){null==this.setLocal()&&this.getPlayList(),this.onShow()},getPlayList:function(){$.ajax({type:"get",dataType:"json",data:{id:$.$route.query.id},url:apiUrls.song.playlist,success:function(o){var e;200==o.code&&(e=[],o.playlist.trackIds.forEach(function(t){e.push(t.id)}),e=e.join(","),t.getSongDetail({ids:e},function(t){o.playlist.tracks=t.songs,o.privileges=t.privileges,o.playlist.tracks.map(function(t){t.dt=$.filterDruationTime(t.dt)});var e=o.playlist,i=(e.subscribers,e.trackIds,e.tracks,_objectWithoutProperties(e,["subscribers","trackIds","tracks"]));i.createTime=new Date(i.createTime).toLocaleDateString().split("/").join("-"),i.playCount=$.filterPlayCount(i.playCount),i.subscribedCount=$.filterPlayCount(i.subscribedCount),i.shareCount=$.filterPlayCount(i.shareCount),$(".song-list").render($(layoutTemp).find("#listTemp"),{list:o.playlist.tracks,order:!0,operation:!0}),$.$store.set("songList",{list:t},(new Date).getTime()+1e3);var s=template("coverTemp",{coverDetail:i});console.log(o.playlist.tracks,"getSongDetail"),$(".song-detail-list .cover").html(s),i.description&&null!==i.description&&$(".song-detail-list .desc p").html("简介："+i.description.split("\n").join("<br/>"))}))}})},getSongDetail:function(t,e){$.ajax({type:"get",dataType:"json",data:t,url:apiUrls.song.detail,success:function(t){t.result;e(t)}})},onShow:function(){$(document).on("click",".js-list-detail",function(){var t=$(this).attr("data-id"),e=$(this).attr("data-type"),i=$(this).attr("data-ctype");$.$router.push("/songs/list",{id:t,type:e,ctype:i})})}};t.init(),$(".song-detail-list").on("click",".js-more",function(){$(this).toggleClass("active").parent().toggleClass("active line-two")})});