"use strict";$(function(){var a={swiperOption:{slidesPerView:1,effect:"coverflow",centeredSlides:!0,coverflowEffect:{rotate:0,stretch:100,depth:50,modifier:3,slideShadows:!1},autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},loop:!0,navigation:{nextEl:".button-next",prevEl:".button-prev"},speed:500},setLocal:function(){var e=$.$store.get("banner"),t=$.$store.get("mvList"),i=$.$store.get("recommendList"),n=$.$store.get("djList"),s=$.$store.get("newestList"),r=$.$store.get("privatecontentList");return $(".recommend-list").find(".date-text").html((new Date).getDate()).siblings(".week").html(commonObj.weeks[(new Date).getDay()]),$(".swiper-wrapper").render($(layoutTemp).find("#bannerTemp"),e),$(".recommend-list").render($(layoutTemp).find("#gridListTemp"),i),$(".dj-list").render($(layoutTemp).find("#gridListTemp"),n),$(".mv-list").render($(layoutTemp).find("#gridListTemp"),t),$(".newest-list").render($(layoutTemp).find("#gridListTemp"),s),$(".privatecontent-list").render($(layoutTemp).find("#gridListTemp"),r),new Swiper(".swiper-container",a.swiperOption),e||t},init:function(){null==this.setLocal()&&(this.getBanner(),this.getRecommend(),this.getPrivatecontent(),this.getTopSong(),this.getMVList(),this.getDjRecommend()),this.onShow()},getBanner:function(){$.ajax({type:"get",dataType:"json",data:{json:1},url:apiUrls.home.banner,success:function(e){$(".swiper-wrapper").render($(layoutTemp).find("#bannerTemp"),{list:e.banners}),$.$store.set("banner",{list:e.banners},(new Date).getTime()+6e4),new Swiper(".swiper-container",a.swiperOption)}})},getRecommend:function(){$.ajax({type:"get",dataType:"json",data:{limit:9},url:apiUrls.home.personalized,success:function(e){var t=e.result;t.forEach(function(e){e.playCount=$.filterPlayCount(e.playCount)}),$(".recommend-list").render($(layoutTemp).find("#gridListTemp"),{list:t}),$.$store.set("recommendList",{list:t},(new Date).getTime()+6e4)}})},getPrivatecontent:function(){$.ajax({type:"get",dataType:"json",data:{limit:9},url:apiUrls.home.privatecontent,success:function(e){var t=e.result;$(".privatecontent-list").render($(layoutTemp).find("#gridListTemp"),{list:t}),$.$store.set("privatecontentList",{list:t},(new Date).getTime()+6e4)}})},getTopSong:function(){$.ajax({type:"get",dataType:"json",data:{limit:9},url:apiUrls.home.topSong,success:function(e){var t=[{ftype:0,list:(t=e.data.slice(0,10)).slice(0,5)},{ftype:0,list:t.slice(5,10)}];$(".newest-list").render($(layoutTemp).find("#gridListTemp"),{list:t}),$.$store.set("newestList",{list:t},(new Date).getTime()+6e4)}})},getMVList:function(){$.ajax({type:"get",dataType:"json",data:{limit:9},url:apiUrls.home.mv,success:function(e){var t;200==e.code&&(t=e.result.slice(0,3),$(".mv-list").render($(layoutTemp).find("#gridListTemp"),{list:t,category:e.category}),$.$store.set("mvList",{list:t,category:e.category},(new Date).getTime()+6e4))}})},getDjRecommend:function(){$.ajax({type:"get",dataType:"json",data:{limit:5},url:apiUrls.home.djrecommend,success:function(e){var t;200==e.code&&(t=e.djRadios.slice(0,5),$(".dj-list").render($(layoutTemp).find("#gridListTemp"),{list:t,category:e.category}),$.$store.set("djList",{list:t,category:e.category},(new Date).getTime()+6e4))}})},onShow:function(){$(document).on("click",".js-list-detail",function(){var e=$(this).attr("data-id"),t=$(this).attr("data-type"),i=$(this).attr("data-ctype");$.$router.push("/songs/list",{id:e,type:t,ctype:i})})}};a.init()});